function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

console.log("Heroku loaded");
<% if @discountCount > 0 %>
  (async function() {
    await sleep(500);
    if (document.getElementsByClassName('applied-reduction-code__information').length < 1) {
      var discountField = document.getElementById('checkout_reduction_code');
      if (discountField != null){
        discountField.value = "<%= @discount.name %>";
        document.getElementsByClassName('edit_checkout')[0].submit();
        await sleep(500);
      }
    }else{
      document.getElementsByClassName("order-summary__section--discount")[0].style.display = 'none';
    }
    })();

 <% end %>
